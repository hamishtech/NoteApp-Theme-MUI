(this["webpackJsonpmaterial-ui-tut"]=this["webpackJsonpmaterial-ui-tut"]||[]).push([[0],{172:function(e,t,a){},185:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,s=a(81),l=a(0),j=a.n(l),d=a(15),b=a.n(d),u=(a(172),a(18)),O=a(146),m=a(247),h=a(101),x=a(99),p=a(53),g=a(23),f=a(220),v=a(225),y=a(226),w=a(47),C=a(257),N=a(228),S=a(254),k=a(229),M=a(230),q=a(231),I=a(232),W=a(222),$=a(224),D=a(248),V=a(20),U=a(64),A=Object(V.gql)(n||(n=Object(U.a)(["\n  query {\n    getUser {\n      username\n      notes {\n        title\n        details\n        date\n        category\n        id\n      }\n    }\n  }\n"]))),B=a(4),T=j.a.createContext(""),H=function(e){var t=e.children,a=Object(V.useQuery)(A),n=a.data,r=a.refetch;return Object(B.jsx)(T.Provider,{value:[n,r],children:t})},z=a(227),F=Object(f.a)((function(e){return{page:{width:"100%"},drawer:{width:240},root:{display:"flex"},active:{background:"#f4f4f4"},title:{padding:e.spacing(3)},appBar:{width:"calc(100% - ".concat(240,"px)")},toolbar:{height:"90px"},date:{flexGrow:"1"},avatar:{marginRight:e.spacing(2)}}})),R=function(e){var t=e.children,a=F(),n=Object(g.g)(),r=Object(g.h)(),c=Object(l.useContext)(T),i=Object(u.a)(c,2),o=i[0],s=(i[1],Object(V.useApolloClient)()),j=[{text:"My Notes",icon:Object(B.jsx)(W.a,{color:"secondary"}),path:"/notes"},{text:"Create Note",icon:Object(B.jsx)($.a,{color:"secondary"}),path:"/create"}];return Object(B.jsxs)("div",{className:a.root,children:[Object(B.jsx)(v.a,{elevation:0,className:a.appBar,children:Object(B.jsxs)(y.a,{children:[Object(B.jsx)(w.a,{className:a.date,variant:"body1",children:Object(D.a)(new Date,"do MMMM Y")}),Object(B.jsxs)(w.a,{variant:"body1",component:"span",className:a.avatar,children:[o?o.getUser.username:Object(B.jsx)(z.a,{color:"secondary",size:"25px"})," "]})," ",Object(B.jsx)(C.a,{src:"",className:a.avatar}),Object(B.jsxs)("div",{children:[" ",Object(B.jsx)(N.a,{variant:"contained",color:"secondary",onClick:function(){window.localStorage.removeItem("tokenValue"),s.clearStore(),n.push("/")},children:"Logout"})," "]})]})}),Object(B.jsxs)(S.a,{classes:{paper:a.drawer},className:a.drawer,anchor:"left",variant:"permanent",children:[Object(B.jsx)("div",{children:Object(B.jsx)(w.a,{variant:"h5",className:a.title,children:"My Notes"})}),Object(B.jsx)(k.a,{children:j.map((function(e){return Object(B.jsxs)(M.a,{className:r.pathname===e.path?a.active:null,button:!0,onClick:function(){n.push(e.path)},children:[Object(B.jsx)(q.a,{children:e.icon}),Object(B.jsx)(I.a,{children:e.text})]},e.text)}))})]}),Object(B.jsxs)("div",{className:a.page,children:[Object(B.jsx)("div",{className:a.toolbar}),t]})]})},E=a(233),G=a(143),L=a.n(G),P=a(234),Y=a(235),J=a(258),Q=a(253),_=a(249),K=a(237),X=Object(V.gql)(r||(r=Object(U.a)(["\n  mutation CreateNote($title: String!, $details: String!, $category: String!) {\n    createNote(title: $title, details: $details, category: $category) {\n      title\n      details\n    }\n  }\n"]))),Z=Object(V.gql)(c||(c=Object(U.a)(["\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n    }\n  }\n"]))),ee=Object(V.gql)(i||(i=Object(U.a)(["\n  mutation CreateUser($username: String!, $password: String!) {\n    createUser(username: $username, password: $password) {\n      token\n    }\n  }\n"]))),te=Object(V.gql)(o||(o=Object(U.a)(["\n  mutation DeleteNote($id: String!) {\n    deleteNote(id: $id)\n  }\n"]))),ae=Object(f.a)({field:{marginTop:20,marginBottom:20,display:"block"}});function ne(){var e=ae(),t=Object(l.useState)(""),a=Object(u.a)(t,2),n=a[0],r=a[1],c=Object(l.useState)(""),i=Object(u.a)(c,2),o=i[0],s=i[1],j=Object(l.useState)(!1),d=Object(u.a)(j,2),b=d[0],O=d[1],m=Object(l.useState)(!1),h=Object(u.a)(m,2),x=h[0],p=h[1],f=Object(l.useState)("todos"),v=Object(u.a)(f,2),y=v[0],C=v[1],S=Object(V.useMutation)(X),k=Object(u.a)(S,1)[0],M=Object(g.g)(),q=Object(l.useContext)(T),I=Object(u.a)(q,2),W=(I[0],I[1]);return Object(B.jsxs)(E.a,{size:"xl",children:[Object(B.jsx)(w.a,{variant:"h6",color:"textSecondary",component:"h2",gutterBottom:!0,children:"Create a New Note"}),Object(B.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){return e.preventDefault(),O(!1),p(!1),""===n?O(!0):""===o?p(!0):void(n&&o&&(k({variables:{title:n,details:o,category:y}}).then((function(){W()})),r(""),s(""),M.push("/notes")))},children:[Object(B.jsx)(_.a,{className:e.field,onChange:function(e){return r(e.target.value)},label:"Note Title",variant:"outlined",color:"secondary",fullWidth:!0,required:!0,error:b}),Object(B.jsx)(_.a,{className:e.field,onChange:function(e){return s(e.target.value)},label:"Details",variant:"outlined",color:"secondary",multiline:!0,rows:4,fullWidth:!0,required:!0,error:x}),Object(B.jsxs)(P.a,{className:e.field,children:[Object(B.jsx)(Y.a,{children:"Note Category "}),Object(B.jsxs)(J.a,{defaultValue:y,onChange:function(e){C(e.target.value)},children:[Object(B.jsx)(K.a,{control:Object(B.jsx)(Q.a,{}),label:"Money",value:"money"}),Object(B.jsx)(K.a,{control:Object(B.jsx)(Q.a,{}),label:"Todos",value:"todos"}),Object(B.jsx)(K.a,{control:Object(B.jsx)(Q.a,{}),label:"Reminders",value:"reminders"}),Object(B.jsx)(K.a,{control:Object(B.jsx)(Q.a,{}),label:"Study",value:"study"})]})]}),Object(B.jsx)(N.a,{type:"submit",color:"secondary",variant:"contained",endIcon:Object(B.jsx)(L.a,{}),children:"Submit"})]})]})}var re=a(238),ce=a(150),ie=Object(f.a)({root:{minWidth:"100%",minHeight:"100vh",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:'url("https://images.unsplash.com/photo-1586156926774-098f04336b57?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2767&q=80")'},title:{flexGrow:1},spaceCreator:{height:"100px",backgroundColor:"transparent"},paper:{textAlign:"center",backgroundColor:"transparent"}}),oe=function(){var e=Object(g.g)(),t=ie();return Object(B.jsxs)(E.a,{className:t.root,children:[Object(B.jsx)(v.a,{children:Object(B.jsxs)(y.a,{children:[Object(B.jsx)(w.a,{className:t.title,children:"Hamish's Note App"}),Object(B.jsx)(N.a,{variant:"contained",color:"secondary",onClick:function(){e.push("/login")},children:"Login"})]})}),Object(B.jsx)("div",{className:t.spaceCreator}),Object(B.jsx)(re.a,{xs:12,container:!0,spacing:0,direction:"column",justify:"center",style:{minHeight:"60vh"},children:Object(B.jsxs)(ce.a,{className:t.paper,elevation:0,children:[" ",Object(B.jsxs)(w.a,{variant:"h2",children:[" ",Object(B.jsx)("pre",{style:{fontFamily:"inherit"}}),"Organize your notes"," "]})," ",Object(B.jsx)(w.a,{variant:"h2",children:" with this Note App! "}),Object(B.jsxs)(N.a,{variant:"contained",color:"primary",onClick:function(){e.push("/login")},style:{marginTop:"30px"},children:["Get started!"," "]})]})})]})},se=a(240),le=a(255),je=a(239),de=a(256),be=a(252),ue=a(250),Oe=a(98),me=a.n(Oe);function he(){return Object(B.jsxs)(w.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(B.jsxs)(je.a,{color:"inherit",href:"https://material-ui.com/",children:["HB-Technology"," "]})," ",(new Date).getFullYear(),"."]})}function xe(e){return Object(B.jsx)(be.a,Object(s.a)({elevation:6,variant:"filled"},e))}var pe=Object(f.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},alert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function ge(){var e=pe(),t=Object(l.useState)(""),a=Object(u.a)(t,2),n=a[0],r=a[1],c=Object(l.useState)(""),i=Object(u.a)(c,2),o=i[0],s=i[1],d=j.a.useState(!1),b=Object(u.a)(d,2),O=b[0],m=b[1],h=Object(V.useMutation)(Z,{onError:function(e){m(!0)}}),x=Object(u.a)(h,2),p=x[0],f=x[1],v=Object(g.g)(),y=Object(l.useContext)(T),S=Object(u.a)(y,2),k=(S[0],S[1]),M=function(e,t){"clickaway"!==t&&m(!1)};return Object(l.useEffect)((function(){f.data&&(window.localStorage.setItem("tokenValue",f.data.login.token),k(),setTimeout((function(){v.push("/notes")}),1e3))}),[f.data,v]),Object(B.jsxs)(re.a,{container:!0,component:"main",className:e.root,children:[Object(B.jsx)(se.a,{}),Object(B.jsx)(re.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(B.jsx)(re.a,{item:!0,xs:12,sm:8,md:5,component:ce.a,elevation:6,square:!0,children:Object(B.jsxs)("div",{className:e.paper,children:[Object(B.jsx)(C.a,{className:e.avatar,children:Object(B.jsx)(me.a,{})}),Object(B.jsx)(w.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(B.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),p({variables:{password:n,username:o}})},children:[Object(B.jsx)(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,onChange:function(e){s(e.target.value)},id:"email",label:"Username",name:"username",autoComplete:"username",autoFocus:!0}),Object(B.jsx)(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,onChange:function(e){r(e.target.value)},name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(B.jsx)(K.a,{control:Object(B.jsx)(le.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(B.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(B.jsxs)(re.a,{container:!0,children:[Object(B.jsx)(re.a,{item:!0,xs:!0,children:Object(B.jsx)(je.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(B.jsx)(re.a,{item:!0,children:Object(B.jsx)(je.a,{href:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(B.jsx)(ue.a,{mt:5,children:Object(B.jsx)(he,{})})]}),Object(B.jsx)("div",{className:e.alert,children:Object(B.jsx)(de.a,{open:O,autoHideDuration:3e3,onClose:M,children:Object(B.jsx)(xe,{onClose:M,severity:"error",children:"Invalid login details!"})})})]})})]})}var fe=a(147),ve=a(243),ye=a(244),we=a(187),Ce=a(246),Ne=a(245),Se=a(241),ke=a(100),Me=a(242),qe=Object(f.a)((function(e){return{card:{padding:e.spacing(3)},note:{border:function(e){return"todos"===e.category?"1px solid red":null}},avatar:{backgroundColor:function(e){switch(e.category){case"todos":return Se.a[700];case"reminders":return h.a[500];case"work":return ke.a[500];default:return Me.a[500]}}}}})),Ie=function(e){var t=e.note,a=Object(V.useApolloClient)(),n=t.id,r=Object(V.useMutation)(te),c=Object(u.a)(r,1)[0],i=qe(t);return Object(B.jsx)("div",{children:Object(B.jsxs)(ve.a,{elevation:5,className:i.note,children:[Object(B.jsx)(ye.a,{avatar:Object(B.jsx)(C.a,{className:i.avatar,children:t.category[0].toUpperCase()}),action:Object(B.jsxs)(we.a,{onClick:function(){c({variables:{id:n}}).then((function(){a.resetStore()}))},children:[" ",Object(B.jsx)(Ne.a,{})]}),title:t.title,subheader:t.category}),Object(B.jsx)(Ce.a,{children:Object(B.jsxs)(w.a,{variant:"body1",children:[" ",t.details]})})]})})};function We(){var e=Object(l.useContext)(T),t=Object(u.a)(e,2),a=t[0];t[1],Object(g.g)();return console.log(a),Object(B.jsx)(E.a,{children:a?Object(B.jsx)(fe.a,{breakpointCols:{default:3,1100:2,700:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:a.getUser.notes.map((function(e){return Object(B.jsx)("div",{children:Object(B.jsx)(Ie,{variant:"outlined",note:e})},e.date)}))}):Object(B.jsx)(z.a,{color:"secondary",size:"25px"})})}var $e=a(109),De=a.n($e),Ve=a(144),Ue=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function Ae(){var e=Ue(),t=Object(V.useMutation)(ee),a=Object(u.a)(t,2),n=a[0],r=a[1],c=Object(l.useState)(""),i=Object(u.a)(c,2),o=i[0],s=i[1],j=Object(l.useState)(""),d=Object(u.a)(j,2),b=d[0],O=d[1],m=Object(g.g)(),h=Object(l.useContext)(T),x=Object(u.a)(h,2),p=(x[0],x[1]);console.log(window.localStorage.getItem("tokenValue"));var f=function(){var e=Object(Ve.a)(De.a.mark((function e(t){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),""!==o&&""!==b){e.next=4;break}return e.abrupt("return");case 4:n({variables:{username:o,password:b}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){r.data&&(window.localStorage.setItem("tokenValue",r.data.createUser.token),p(),m.push("/notes"))}),[r.data,m]),Object(B.jsxs)(E.a,{component:"main",maxWidth:"xs",children:[Object(B.jsx)(se.a,{}),Object(B.jsxs)("div",{className:e.paper,children:[Object(B.jsx)(C.a,{className:e.avatar,children:Object(B.jsx)(me.a,{})}),Object(B.jsx)(w.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(B.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:f,children:[Object(B.jsxs)(re.a,{container:!0,spacing:2,children:[Object(B.jsx)(re.a,{item:!0,xs:12,sm:12,children:Object(B.jsx)(_.a,{autoComplete:"fname",name:"userName",variant:"outlined",required:!0,onChange:function(e){var t=e.target;s(t.value)},fullWidth:!0,id:"userName",label:"Username",autoFocus:!0})}),Object(B.jsx)(re.a,{item:!0,xs:12,children:Object(B.jsx)(_.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(B.jsx)(re.a,{item:!0,xs:12,children:Object(B.jsx)(_.a,{variant:"outlined",required:!0,fullWidth:!0,onChange:function(e){var t=e.target;O(t.value)},name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})})]}),Object(B.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),Object(B.jsx)(re.a,{container:!0,justify:"flex-end",children:Object(B.jsx)(re.a,{item:!0,children:Object(B.jsx)(je.a,{href:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(B.jsx)(ue.a,{mt:5,children:Object(B.jsx)(he,{})})]})}var Be=Object(O.a)({palette:{palette:{primary:h.a,secondary:x.a}},typography:{fontFamily:"Quicksand",fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600,fontWeightBold:700}});var Te=function(){var e=Object(l.useContext)(T),t=Object(u.a)(e,2),a=t[0];return t[1],Object(B.jsx)(m.a,{theme:Be,children:Object(B.jsx)(p.a,{children:Object(B.jsxs)(g.d,{children:[Object(B.jsx)(g.b,{path:"/login",children:Object(B.jsx)(ge,{})}),Object(B.jsx)(g.b,{path:"/register",children:Object(B.jsx)(Ae,{})}),Object(B.jsx)(g.b,{exact:!0,path:"/",children:Object(B.jsx)(oe,{})}),Object(B.jsxs)(R,{children:[Object(B.jsx)(g.b,{path:"/create",children:a||window.localStorage.getItem("tokenValue")?Object(B.jsx)(ne,{}):Object(B.jsx)(g.a,{to:"/login"})}),Object(B.jsx)(g.b,{exact:!0,path:"/notes",children:a||window.localStorage.getItem("tokenValue")?Object(B.jsx)(We,{}):Object(B.jsx)(g.a,{to:"/login"})})]})]})})})},He=a(84),ze=a(145),Fe=Object(V.createHttpLink)({uri:"/graphql"}),Re=Object(ze.a)((function(e,t){var a=t.headers,n=localStorage.getItem("tokenValue");return{headers:Object(s.a)(Object(s.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),Ee=new V.ApolloClient({link:Re.concat(Fe),cache:new V.InMemoryCache});b.a.render(Object(B.jsx)(He.ApolloProvider,{client:Ee,children:Object(B.jsx)(H,{children:Object(B.jsx)(j.a.StrictMode,{children:Object(B.jsx)(Te,{})})})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.933a7c2c.chunk.js.map